[gd_scene load_steps=15 format=2]

[ext_resource path="res://Resources/Tilesets/Tileset_Main.tres" type="TileSet" id=1]
[ext_resource path="res://Prefabs/LoadingZone.tscn" type="PackedScene" id=2]
[ext_resource path="res://Sprites/Characters/Friendly NPCs/Ivari_idle.png" type="Texture" id=3]
[ext_resource path="res://Sprites/Speech_bubble.png" type="Texture" id=4]
[ext_resource path="res://Prefabs/Player.tscn" type="PackedScene" id=5]
[ext_resource path="res://Scripts/NPC.gd" type="Script" id=6]

[sub_resource type="NavigationPolygon" id=1]
vertices = PoolVector2Array( 24, 24, 296, 24, 296, 168, 184, 168, 184, 184, 136, 184, 136, 168, 24, 168 )
polygons = [ PoolIntArray( 0, 1, 2, 3 ), PoolIntArray( 3, 4, 5, 6 ), PoolIntArray( 0, 3, 6 ), PoolIntArray( 0, 6, 7 ) ]
outlines = [ PoolVector2Array( 24, 24, 24, 168, 136, 168, 136, 184, 184, 184, 184, 168, 296, 168, 296, 24 ) ]

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 32, 8 )

[sub_resource type="SpriteFrames" id=3]
animations = [ {
"frames": [ ExtResource( 3 ) ],
"loop": true,
"name": "idle",
"speed": 5.0
} ]

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 5, 4 )

[sub_resource type="CircleShape2D" id=5]
radius = 40.05

[sub_resource type="Animation" id=7]
resource_name = "Talk"
length = 10.0
tracks/0/type = "method"
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.2, 3, 7, 8.5 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"values": [ {
"args": [ PoolStringArray( "Um... Can I help you\?" ) ],
"method": "talk_dialogue"
}, {
"args": [ PoolStringArray( "Hm... demons don\'t sit like that.", "And you look pretty uneasy, the way you\'re moving your tail.", "You must be that student who got assigned to seal away Osme again.", "Osme turned you into a demon, didn\'t he\? That\'s a new one.", "That\'s pretty rotten luck.", "Yep. That sucks.", "Really too bad." ) ],
"method": "talk_dialogue"
}, {
"args": [ PoolStringArray( "What\?", "Don\'t tell me you want me to help you, kid.", "You absolutely want me to help you.", "Well, lucky for you, I don\'t actually care about protecting Osme.", "I think watching him duel sorcerers is quite entertaining, actually.", "So I\'ll throw you a bone and nudge you out of your predicament." ) ],
"method": "talk_dialogue"
}, {
"args": [ PoolStringArray( "There. You\'re human again.", "Have fun fighting Osme." ) ],
"method": "talk_dialogue"
}, {
"args": [ PoolStringArray( "Oh... one thing I forgot to mention:", "[color=#ff0000]You\'ll turn back into a demon in 20 seconds.[/color]", "[color=#00c6ff]And then back into a human 20 seconds after that.[/color]", "And again and again until who-knows-when.", "I\'m not powerful enough to fully break Osme\'s curses. Sorry. Did what I can." ) ],
"method": "talk_dialogue"
} ]
}
tracks/1/type = "method"
tracks/1/path = NodePath("../Player")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 4 ),
"transitions": PoolRealArray( 1 ),
"values": [ {
"args": [ false ],
"method": "transform"
} ]
}

[sub_resource type="Animation" id=8]
resource_name = "Talk2"
length = 0.1
tracks/0/type = "method"
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"values": [ {
"args": [ PoolStringArray( "If you\'re gonna go fight Osme, do it already.", "I\'m getting bored." ) ],
"method": "talk_dialogue"
} ]
}

[sub_resource type="Animation" id=6]
resource_name = "Idle"
length = 0.8
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Interact:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.2, 0.4, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 3 ]
}

[node name="Scene" type="Node2D"]
__meta__ = {
"_edit_vertical_guides_": [ 160.0 ]
}

[node name="TileMap" type="TileMap" parent="."]
z_index = -1000
tile_set = ExtResource( 1 )
cell_size = Vector2( 16, 16 )
collision_layer = 512
collision_mask = 512
format = 1
tile_data = PoolIntArray( 0, 0, 0, 1, 0, 0, 2, 0, 0, 3, 0, 0, 4, 0, 0, 5, 0, 0, 6, 0, 0, 7, 0, 0, 8, 0, 0, 9, 0, 0, 10, 0, 0, 11, 0, 0, 12, 0, 0, 13, 0, 0, 14, 0, 0, 15, 0, 0, 16, 0, 0, 17, 0, 0, 18, 0, 0, 19, 0, 0, 65536, 0, 0, 65537, 15, 0, 65538, 15, 0, 65539, 15, 0, 65540, 15, 0, 65541, 15, 0, 65542, 15, 0, 65543, 15, 0, 65544, 15, 0, 65545, 15, 0, 65546, 15, 0, 65547, 15, 0, 65548, 15, 0, 65549, 15, 0, 65550, 15, 0, 65551, 15, 0, 65552, 15, 0, 65553, 15, 0, 65554, 15, 0, 65555, 0, 0, 131072, 0, 0, 131073, 15, 0, 131074, 15, 0, 131075, 15, 0, 131076, 15, 0, 131077, 15, 0, 131078, 15, 0, 131079, 15, 0, 131080, 15, 0, 131081, 15, 0, 131082, 15, 0, 131083, 15, 0, 131084, 15, 0, 131085, 15, 0, 131086, 15, 0, 131087, 15, 0, 131088, 15, 0, 131089, 15, 0, 131090, 15, 0, 131091, 0, 0, 196608, 0, 0, 196609, 6, 0, 196610, 5, 0, 196611, 6, 0, 196612, 6, 0, 196613, 6, 0, 196614, 1073741828, 0, 196615, 6, 0, 196616, 6, 0, 196617, 6, 0, 196618, 6, 0, 196619, 6, 0, 196620, 6, 0, 196621, 14, 0, 196622, 6, 0, 196623, 6, 0, 196624, 6, 0, 196625, 1, 0, 196626, 6, 0, 196627, 0, 0, 262144, 0, 0, 262145, 6, 0, 262146, 6, 0, 262147, 6, 0, 262148, 6, 0, 262149, 6, 0, 262150, 7, 0, 262151, 6, 0, 262152, 6, 0, 262153, 6, 0, 262154, 13, 0, 262155, 6, 0, 262156, 6, 0, 262157, 6, 0, 262158, 6, 0, 262159, 6, 0, 262160, 6, 0, 262161, 6, 0, 262162, 6, 0, 262163, 0, 0, 327680, 0, 0, 327681, 6, 0, 327682, 6, 0, 327683, 6, 0, 327684, 6, 0, 327685, 6, 0, 327686, 6, 0, 327687, 6, 0, 327688, 6, 0, 327689, 6, 0, 327690, 6, 0, 327691, 6, 0, 327692, 536870925, 0, 327693, 6, 0, 327694, 6, 0, 327695, 6, 0, 327696, 6, 0, 327697, 6, 0, 327698, 6, 0, 327699, 0, 0, 393216, 0, 0, 393217, 6, 0, 393218, 6, 0, 393219, 6, 0, 393220, 6, 0, 393221, 536870915, 0, 393222, 6, 0, 393223, 2, 0, 393224, 6, 0, 393225, 6, 0, 393226, 6, 0, 393227, 6, 0, 393228, 6, 0, 393229, 6, 0, 393230, 6, 0, 393231, 12, 0, 393232, 6, 0, 393233, 6, 0, 393234, 6, 0, 393235, 0, 0, 458752, 0, 0, 458753, 6, 0, 458754, 6, 0, 458755, 6, 0, 458756, 6, 0, 458757, 6, 0, 458758, 6, 0, 458759, 6, 0, 458760, 6, 0, 458761, 6, 0, 458762, 6, 0, 458763, 6, 0, 458764, 10, 0, 458765, 6, 0, 458766, 6, 0, 458767, 6, 0, 458768, 6, 0, 458769, 8, 0, 458770, 6, 0, 458771, 0, 0, 524288, 0, 0, 524289, 6, 0, 524290, 1, 0, 524291, 6, 0, 524292, 6, 0, 524293, 6, 0, 524294, 6, 0, 524295, 6, 0, 524296, 6, 0, 524297, 6, 0, 524298, 6, 0, 524299, 6, 0, 524300, 6, 0, 524301, 6, 0, 524302, 6, 0, 524303, 6, 0, 524304, 1, 0, 524305, 6, 0, 524306, 6, 0, 524307, 0, 0, 589824, 0, 0, 589825, 6, 0, 589826, 6, 0, 589827, 6, 0, 589828, 6, 0, 589829, 2, 0, 589830, 6, 0, 589831, 6, 0, 589832, 6, 0, 589833, 6, 0, 589834, 6, 0, 589835, 6, 0, 589836, 6, 0, 589837, 6, 0, 589838, 6, 0, 589839, 6, 0, 589840, 6, 0, 589841, 6, 0, 589842, 6, 0, 589843, 0, 0, 655360, 0, 0, 655361, 6, 0, 655362, 6, 0, 655363, 6, 0, 655364, 9, 0, 655365, 6, 0, 655366, 6, 0, 655367, 6, 0, 655368, 6, 0, 655369, 6, 0, 655370, 6, 0, 655371, 6, 0, 655372, 6, 0, 655373, 6, 0, 655374, -1610612734, 0, 655375, 6, 0, 655376, 13, 0, 655377, 6, 0, 655378, 6, 0, 655379, 0, 0, 720896, 0, 0, 720897, 0, 0, 720898, 0, 0, 720899, 0, 0, 720900, 0, 0, 720901, 0, 0, 720902, 0, 0, 720903, 0, 0, 720904, 6, 0, 720905, 6, 0, 720906, 6, 0, 720907, 6, 0, 720908, 0, 0, 720909, 0, 0, 720910, 0, 0, 720911, 0, 0, 720912, 0, 0, 720913, 0, 0, 720914, 0, 0, 720915, 0, 0 )
__meta__ = {
"_edit_lock_": true
}

[node name="Player" parent="." instance=ExtResource( 5 )]
position = Vector2( 128, 134 )

[node name="Navigation2D" type="Navigation2D" parent="."]
visible = false

[node name="NavigationPolygonInstance" type="NavigationPolygonInstance" parent="Navigation2D"]
navpoly = SubResource( 1 )
__meta__ = {
"_edit_lock_": true
}

[node name="LoadingZone" parent="." instance=ExtResource( 2 )]
position = Vector2( 160, 196 )

[node name="CollisionShape2D" parent="LoadingZone" index="0"]
shape = SubResource( 2 )

[node name="NPCIvari" type="StaticBody2D" parent="."]
position = Vector2( 192, 56 )
z_index = 56
script = ExtResource( 6 )
__meta__ = {
"_edit_group_": true
}
npc_name = "Ivari"
npc_color = Color( 0.513726, 1, 0.447059, 1 )
max_talk_number = 1

[node name="Interact" type="Sprite" parent="NPCIvari"]
visible = false
position = Vector2( 0, -22 )
texture = ExtResource( 4 )
hframes = 4
frame = 3

[node name="Sprite" type="AnimatedSprite" parent="NPCIvari"]
frames = SubResource( 3 )
animation = "idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="NPCIvari"]
position = Vector2( -1, 14 )
shape = SubResource( 4 )

[node name="AreaInteract" type="Area2D" parent="NPCIvari"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="NPCIvari/AreaInteract"]
position = Vector2( 0, 2 )
shape = SubResource( 5 )

[node name="AnimationPlayerTalk" type="AnimationPlayer" parent="NPCIvari"]
anims/Talk = SubResource( 7 )
anims/Talk2 = SubResource( 8 )

[node name="AnimationPlayerInteract" type="AnimationPlayer" parent="NPCIvari"]
autoplay = "Idle"
playback_speed = 0.5
anims/Idle = SubResource( 6 )
[connection signal="body_entered" from="NPCIvari/AreaInteract" to="NPCIvari" method="_on_AreaInteract_body_entered"]
[connection signal="body_exited" from="NPCIvari/AreaInteract" to="NPCIvari" method="_on_AreaInteract_body_exited"]
[connection signal="animation_finished" from="NPCIvari/AnimationPlayerTalk" to="NPCIvari" method="_on_AnimationPlayerTalk_animation_finished"]

[editable path="LoadingZone"]
